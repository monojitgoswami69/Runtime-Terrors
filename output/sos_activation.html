<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>AmbuQuick - SOS Activated</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary-blue": "#007BFF",
                        "emergency-red": "#E63946",
                        "success-green": "#2ECC71",
                        "neutral-gray": "#F5F5F5",
                        "background-dark": "#121212",
                        "text-dark": "#1C1C1E",
                        "text-gray": "#8A8A8E",
                    },
                    fontFamily: {
                        "sans": ["Inter", "Poppins", "sans-serif"],
                    },
                },
            },
        }
    </script>
    <style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(230, 57, 70, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 50px rgba(230, 57, 70, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(230, 57, 70, 0);
            }
        }

        .pulsing-glow {
            animation: pulse 2s infinite;
        }

        @keyframes radialGlow {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        .radial-glow {
            animation: radialGlow 2s ease-in-out infinite;
        }

        .progress-ring__circle {
            stroke-dasharray: 628;
            stroke-dashoffset: 628;
            transition: stroke-dashoffset 1s linear;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body class="font-sans bg-background-dark">
    <div class="relative flex h-screen w-full flex-col overflow-hidden">
        <!-- Background gradients -->
        <div class="absolute inset-0 bg-gradient-to-br from-red-950 via-background-dark to-black"></div>
        <div class="absolute inset-0 radial-glow" style="background: radial-gradient(circle at center, rgba(230, 57, 70, 0.3) 0%, transparent 70%);"></div>

        <!-- Main Content -->
        <div class="relative z-10 flex-1 flex justify-center items-center px-4 py-8">
            <div class="max-w-md w-full flex flex-col items-center">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="flex items-center justify-center gap-3 mb-4">
                        <span class="material-symbols-outlined text-emergency-red text-5xl animate-pulse">emergency</span>
                        <h1 class="text-white text-4xl sm:text-5xl font-black tracking-tight">SOS ACTIVATED</h1>
                    </div>
                    <p class="text-white/80 text-lg font-semibold">Sending your emergency signal in...</p>
                </div>

                <!-- Countdown Timer -->
                <div class="relative flex items-center justify-center w-72 h-72 sm:w-80 sm:h-80 my-8">
                    <!-- SVG Progress Ring -->
                    <svg class="absolute w-full h-full -rotate-90" viewBox="0 0 220 220">
                        <circle class="text-emergency-red/10" cx="110" cy="110" fill="transparent" r="100" stroke="currentColor" stroke-width="8"></circle>
                        <circle id="progressRing" class="progress-ring__circle text-emergency-red" cx="110" cy="110" fill="transparent" r="100" stroke="currentColor" stroke-width="8" style="stroke-dashoffset: 0;"></circle>
                    </svg>
                    
                    <!-- Pulsing Circle with Countdown -->
                    <div class="flex items-center justify-center w-60 h-60 sm:w-64 sm:h-64 rounded-full bg-gradient-to-br from-emergency-red/30 to-emergency-red/10 pulsing-glow backdrop-blur-sm border-4 border-emergency-red/50">
                        <div class="text-center">
                            <span id="countdown" class="text-white text-8xl sm:text-9xl font-black tracking-tighter">10</span>
                            <p class="text-white/70 text-sm font-bold uppercase tracking-widest mt-2">Seconds</p>
                        </div>
                    </div>

                    <!-- Rotating danger indicators -->
                    <div class="absolute inset-0 animate-spin" style="animation-duration: 3s;">
                        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-3 h-3 bg-emergency-red rounded-full"></div>
                        <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-3 h-3 bg-emergency-red rounded-full"></div>
                        <div class="absolute left-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-emergency-red rounded-full"></div>
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-emergency-red rounded-full"></div>
                    </div>
                </div>

                <!-- Warning Message -->
                <div class="mb-8 px-6 py-4 bg-emergency-red/20 border border-emergency-red/50 rounded-lg backdrop-blur-sm">
                    <p class="text-white text-center text-base font-semibold">
                        <span class="material-symbols-outlined align-middle mr-1">warning</span>
                        Emergency services will be notified automatically
                    </p>
                </div>

                <!-- Cancel Button -->
                <div class="w-full px-4">
                    <button id="cancelBtn" class="w-full flex items-center justify-center gap-2 rounded-lg h-14 px-6 bg-transparent border-2 border-emergency-red text-white text-lg font-bold hover:bg-emergency-red/20 focus:outline-none focus:ring-4 focus:ring-emergency-red/50 transition-all">
                        <span class="material-symbols-outlined">cancel</span>
                        <span>CANCEL SOS</span>
                    </button>
                </div>

                <!-- Emergency Info -->
                <div class="mt-8 text-center">
                    <p class="text-white/60 text-sm">Your location is being tracked</p>
                    <p class="text-white/60 text-sm">Help will arrive as soon as possible</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let countdown = 10;
        let intervalId;
        const countdownElement = document.getElementById('countdown');
        const progressRing = document.getElementById('progressRing');
        const cancelBtn = document.getElementById('cancelBtn');
        
        // Calculate progress ring offset
        const circumference = 2 * Math.PI * 100;
        const updateProgress = (timeLeft) => {
            const offset = circumference - (timeLeft / 10) * circumference;
            progressRing.style.strokeDashoffset = offset;
        };

        // Start countdown
        function startCountdown() {
            intervalId = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                updateProgress(countdown);
                
                if (countdown <= 0) {
                    clearInterval(intervalId);
                    // Redirect to SOS confirmation page
                    window.location.href = 'sos_confirmation.html';
                }
            }, 1000);
        }

        // Cancel SOS
        cancelBtn.addEventListener('click', () => {
            clearInterval(intervalId);
            if (confirm('Are you sure you want to cancel the SOS alert?')) {
                window.location.href = 'landing.html';
            } else {
                // Resume countdown
                startCountdown();
            }
        });

        // Start the countdown when page loads
        window.addEventListener('load', () => {
            updateProgress(10);
            setTimeout(startCountdown, 500);
        });

        // Prevent accidental page leave
        window.addEventListener('beforeunload', (e) => {
            if (countdown > 0) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>
